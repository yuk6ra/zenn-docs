---
title: "【Solidity】Hardhatを利用して3分間でスマートコントラクト開発の環境構築を行う"
emoji: "🤖"
type: "tech" # tech: 技術記事 / idea: アイデア
topics:
    - Solidity
published: false
---

# はじめに

# 前提条件
- Linux
- Node.js v18.13.0
- npm 8.19.3
- hardhat 2.13.0



```
$ npm -v
8.19.3

$ node -v
v18.13.0
```

# 環境構築

## 1. ファイル作成
```wsl:bash
mkdir test
cd test
```

## 2. 初期化

```wsl:bash
npm init -y
```

初期化を行って、packageを整える。

## 3. Hardhatのインストール
```code:bash
npm install hardhat --save-dev
```

![](/images/789d411398c6f9/hardhat.png)

```code:bash
npx hardhat compile
```
`Compiled 1 Solidity file successfully`と出たら成功。

```code:bash
$ npx hardhat test
Compiled 1 Solidity file successfully
```


```code:Tree
test
├── artifacts
├── cache
├── contracts
│   └── Lock.sol
├── scripts
│   └── deploy.js
├── test
│   └── Lock.js
├── .gitignore
├── hardhat.config.js
├── package-lock.json
├── package.json
└── README.md
```

https://github.com/NomicFoundation/hardhat

## 4. hardhat-gas-reporterのインストール
```:bash
npm install hardhat-gas-reporter --save-dev
```

## 5. dotenvのインストール
```:bash
npm install dotenv --save-dev
```

## 6. .envファイルの設定

1. 直下に`.env`ファイルを作成する
2. `.env`ファイルに必要な項目を記載する

```javascript:.env
PRIVATE_KEY = ""
ALCHEMY_KEY = ""
ETHERSCAN_KEY = ""
```


```code:Tree
test
├── artifacts
├── cache
├── contracts
│   └── Lock.sol
├── scripts
│   └── deploy.js
├── test
│   └── Lock.js
├── .env <------------ Creation
├── .gitignore
├── hardhat.config.js
├── package-lock.json
├── package.json
└── README.md
```


## 7.
```javascript:hardhat.config.js


```

# デプロイ



# 付録
## Openzeppelin
```code:bash
npm install @openzeppelin/contracts
```
https://github.com/OpenZeppelin/openzeppelin-contracts

```solidity:Example.sol
import "@openzeppelin/contracts/access/Ownable.sol";
import "@openzeppelin/contracts/token/ERC721/ERC721.sol";
```



## hardhat-etherscan
### 導入方法
```code:bash
npm install @nomiclabs/hardhat-etherscan
```

https://github.com/NomicFoundation/hardhat/tree/main/packages/hardhat-etherscan

### Etherscanで検証する方法

1. [etherscan.io](https://etherscan.io/)からAPIを取得する
2. `.env`ファイルに`ETHERSCAN_KEY`として記載する
```javascript:.env
PRIVATE_KEY = ""
ALCHEMY_KEY = ""
ETHERSCAN_KEY = "YOUR_ETHERSCAN_API_KEY"
```
3. `hardhat.config.js`ファイルに設定を追記する

```javascript:hardhat.config.js
module.exports = {
  networks: {
    mainnet: { ... }
  },
  etherscan: {
    // Your API key for Etherscan
    // Obtain one at https://etherscan.io/
    apiKey: process.env.ETHERSCAN_KEY
  }
};
```
4. 下記に従って検証のコマンドを実行する
A. 対象となるコントラクトの`constructor`に引数がない場合
B. 対象となるコントラクトの`constructor`に引数がある場合

#### A. constructorに引数がない場合
```code:template
npx hardhat verify --network goerli your-contract-address
```
```code:example
npx hardhat verify --network goerli 0x8a90CAb2b38dba80c64b7734e58Ee1dB38B8992e
```
#### B. constructorに引数がある場合

1. `args.js`ファイルを作成する

```code:Tree
test
├── artifacts
├── cache
├── contracts
│   └── Lock.sol
├── scripts
│   └── deploy.js
├── test
│   └── Lock.js
├── .env
├── .gitignore
├── args.js <---
├── hardhat.config.js
├── package-lock.json
├── package.json
└── README.md
```
2. スマートコントラクトの`constructor`に対応する引数を入力する
```javascript:args.js
module.exports = [
    "Argument 1",
    "Argument 2",
    "Argument 3",
]
```

3. 検証のコマンドを実行する
```code:template
npx hardhat verify --network goerli your-contract-address --constructor-args args.js
```

```code:example
npx hardhat verify --network goerli 0x8a90CAb2b38dba80c64b7734e58Ee1dB38B8992e --constructor-args args.js
```
