---
title: "ã€Solidityã€‘Hardhatã‚’åˆ©ç”¨ã—ã¦çˆ†é€Ÿã§ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆé–‹ç™ºã®ç’°å¢ƒæ§‹ç¯‰ã‚’è¡Œã„ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦æ¤œè¨¼ã™ã‚‹"
emoji: "ğŸ¤–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:
    - Solidity
published: false
---

# ã¯ã˜ã‚ã«

Solidityã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆé–‹ç™ºã§Hardhatã‚’ã‚ˆãåˆ©ç”¨ã—ã¾ã™ã€‚

æ¯å›æµã‚Œä½œæ¥­ã«ãªã£ã¦ã‚‹ã‚“ã§ã™ãŒã€2é€±é–“ãã‚‰ã„ç©ºãã¨ã€Œãˆãƒ¼â€¦ã£ã¨ã€ã¨æ‰‹ãŒæ­¢ã¾ã£ã¦ã€Notionã®å€‹äººç”¨ã«æ®‹ã—ã¦ã‚‹é–‹ç™ºãƒãƒ¼ãƒˆã‚’è¦‹è¿”ã•ãªãã‚ƒã„ã‘ãªããªã‚Šã¾ã™ã€‚ãƒãƒ¼ãƒˆè‡ªä½“ãŒã‚ã¾ã‚Šæ•´ç†ã•ã‚Œã¦ã„ãªã„ã®ã§æ¢ã™ã®ãŒé¢å€’ã§ã™ã€‚

ã—ãŸãŒã£ã¦ã€ä»Šå›ã¯è‡ªåˆ†ã®æ•´ç†ã‚‚å«ã‚ã¦ã€ãƒ‘ãƒ‘ã£ã¨é–‹ç™ºç’°å¢ƒã‚’æ•´ãˆã‚‹ãƒ¡ãƒ¢ã‚’æ®‹ã—ã¦ãŠã“ã†ã¨æ€ã„ã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜ã§ã¯ãªãã€æ‰‹é †ã®æ–¹æ³•ã‚’è¨˜è¼‰ã—ã¦ã„ãã¾ã™ã€‚

# å‰ææ¡ä»¶

ä¸‹è¨˜ã®çŸ¥è­˜ã¯ã‚ã‚‹ã‚‚ã®ã¨ã—ã¦èª¬æ˜ã—ã¾ã™ã€‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒåˆã‚ãªã„å ´åˆã¯ã€ãã‚Œãã‚Œãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚

- Linux
- EVM
- Node.js
- npm

```code:bash
$ npm -v
$ node -v
```

# ç’°å¢ƒæ§‹ç¯‰

## 1. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ

`test-contract`ã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¦ã¿ã¾ã™ã€‚

```wsl:bash
mkdir test-contract
cd test-contract
```

## 2. åˆæœŸåŒ–

```wsl:bash
npm init -y
```

åˆæœŸåŒ–ã‚’è¡Œã£ã¦ã€packageã‚’æ•´ãˆã‚‹ã€‚

## 3. Hardhatã®å°å…¥

https://hardhat.org/hardhat-runner/docs/guides/project-setup

1. npmã§hardhatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
```code:bash
npm install hardhat --save-dev
```
2. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒçµ‚ã‚ã£ãŸã‚‰ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹
```code:bash
npx hardhat
```

![](/images/789d411398c6f9/hardhat.png)

3. ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ã¿ã‚‹
```code:bash
npx hardhat compile
```

```code:bash
$ npx hardhat test
Compiled 1 Solidity file successfully
```

4. 
```code:Tree
test-contract
â”œâ”€â”€ artifacts
â”œâ”€â”€ cache
â”œâ”€â”€ contracts
â”‚   â””â”€â”€ Lock.sol
â”œâ”€â”€ scripts
â”‚   â””â”€â”€ deploy.js
â”œâ”€â”€ test
â”‚   â””â”€â”€ Lock.js
â”œâ”€â”€ .gitignore
â”œâ”€â”€ hardhat.config.js
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

https://github.com/NomicFoundation/hardhat



## 4. .envãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®š

1. npmã§dotenvãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
```:bash
npm install dotenv --save-dev
```

2. ç›´ä¸‹ã«`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹
```code:Tree
test-contract
â”œâ”€â”€ artifacts
â”œâ”€â”€ cache
â”œâ”€â”€ contracts
â”‚   â””â”€â”€ Lock.sol
â”œâ”€â”€ scripts
â”‚   â””â”€â”€ deploy.js
â”œâ”€â”€ test
â”‚   â””â”€â”€ Lock.js
â”œâ”€â”€ .env <--- Creation
â”œâ”€â”€ .gitignore
â”œâ”€â”€ hardhat.config.js
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

3. `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã«å¿…è¦ãªé …ç›®ã‚’è¨˜è¼‰ã™ã‚‹

```javascript:.env
PRIVATE_KEY = ""
ALCHEMY_KEY = ""
```

https://www.infura.io/

https://www.alchemy.com/


## 5. hardhat.config.jsãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®š
```javascript:hardhat.config.js


```

## ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å°å…¥

ãã®ä»–ã€å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å°å…¥ã—ã¾ã™ã€‚

### hardhat-gas-reporterã®å°å…¥
```:bash
npm install hardhat-gas-reporter --save-dev
```

https://github.com/cgewecke/hardhat-gas-reporter

### Openzeppelinã®å°å…¥
```code:bash
npm install @openzeppelin/contracts
```
https://github.com/OpenZeppelin/openzeppelin-contracts

```solidity:Example.sol
import "@openzeppelin/contracts/access/Ownable.sol";
import "@openzeppelin/contracts/token/ERC721/ERC721.sol";
```

# ãƒ‡ãƒ—ãƒ­ã‚¤


# æ¤œè¨¼
Ethereumã‚’æƒ³å®šã—ã¦ã¿ã¾ã™ã€‚

## hardhat-etherscanã®å°å…¥
```code:bash
npm install @nomiclabs/hardhat-etherscan
```

https://github.com/NomicFoundation/hardhat/tree/main/packages/hardhat-etherscan

## Etherscanã§æ¤œè¨¼ã™ã‚‹æ–¹æ³•

1. [Etherscan.io](https://etherscan.io/)ã‹ã‚‰APIã‚’å–å¾—ã™ã‚‹
2. `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã«`ETHERSCAN_KEY`ã¨ã—ã¦è¨˜è¼‰ã™ã‚‹
```javascript:.env
PRIVATE_KEY = ""
ALCHEMY_KEY = ""
ETHERSCAN_KEY = "YOUR_ETHERSCAN_API_KEY"
```
3. `hardhat.config.js`ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®šã‚’è¿½è¨˜ã™ã‚‹

```javascript:hardhat.config.js
module.exports = {
  networks: {
    mainnet: { ... }
  },
  etherscan: {
    // Your API key for Etherscan
    // Obtain one at https://etherscan.io/
    apiKey: process.env.ETHERSCAN_KEY
  }
};
```
4. ä¸‹è¨˜ã«å¾“ã£ã¦æ¤œè¨¼ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹
A. å¯¾è±¡ã¨ãªã‚‹ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®`constructor`ã«å¼•æ•°ãŒãªã„å ´åˆ
B. å¯¾è±¡ã¨ãªã‚‹ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®`constructor`ã«å¼•æ•°ãŒã‚ã‚‹å ´åˆ

### A. constructorã«å¼•æ•°ãŒãªã„å ´åˆ
```code:template
npx hardhat verify --network goerli your-contract-address
```
```code:example
npx hardhat verify --network goerli 0x8a90CAb2b38dba80c64b7734e58Ee1dB38B8992e
```
### B. constructorã«å¼•æ•°ãŒã‚ã‚‹å ´åˆ

1. `args.js`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹

```code:Tree
test-contract
â”œâ”€â”€ artifacts
â”œâ”€â”€ cache
â”œâ”€â”€ contracts
â”‚   â””â”€â”€ Lock.sol
â”œâ”€â”€ scripts
â”‚   â””â”€â”€ deploy.js
â”œâ”€â”€ test
â”‚   â””â”€â”€ Lock.js
â”œâ”€â”€ .env
â”œâ”€â”€ .gitignore
â”œâ”€â”€ args.js <---
â”œâ”€â”€ hardhat.config.js
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```
2. ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®`constructor`ã«å¯¾å¿œã™ã‚‹å¼•æ•°ã‚’å…¥åŠ›ã™ã‚‹
```javascript:args.js
module.exports = [
    "Argument 1",
    "Argument 2",
    "Argument 3",
]
```

3. æ¤œè¨¼ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹
```code:template
npx hardhat verify --network goerli your-contract-address --constructor-args args.js
```

```code:example
npx hardhat verify --network goerli 0x8a90CAb2b38dba80c64b7734e58Ee1dB38B8992e --constructor-args args.js
```


# 